define(function(){"use strict";var defaults={lockClass:"lb-modal-lock",activeClass:"lb-active",closeButtonSelector:".lb-modal-close"};function bindOpenHandler(){var that=this;this.$triggers.each(function(){this.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();that.activateModal()},true)})}function bindCloseHandler(){this.$elem.find(this.options.closeButtonSelector).click(function(){this.deactivateModal()}.bind(this));var handler=function(e){var event=e.target||e.srcElement;var target=$(event);if(target.is(this.$elem)){this.deactivateModal();$(window).off("click.lb_modal_close",handler)}}.bind(this);$(window).on("click.lb_modal_close",handler)}var ModalMixin={initModal:function(){this.options=$.extend({},defaults,this.$elem.data());this.modalId=this.$elem.data("lbModalId");this.$triggers=$('a[data-lb-modal-trigger="'+this.modalId+'"]');bindOpenHandler.call(this);this.$elem.trigger("custom_lb-modal_after-init")},activateModal:function(){$("body").addClass(this.options.lockClass);this.$elem.addClass(this.options.activeClass);bindCloseHandler.call(this);this.$elem.trigger("custom_lb-modal_after-open")},deactivateModal:function(){this.$elem.trigger("custom_lb_comp-content-container_close");this.$elem.removeClass(this.options.activeClass);$("body").removeClass(this.options.lockClass)}};return ModalMixin});